#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Check if backend folder has staged changes
if git diff --cached --name-only | grep -q "^backend/"; then
  echo "ğŸŸ¢ Backend changes detected â€” running backend checks..."

  cd backend

  yarn install --silent
  yarn type-check || exit 1
  yarn lint || exit 1
  yarn test || exit 1
  yarn build || exit 1

  echo "âœ… Backend pre-commit checks passed!"
else
  echo "â„¹ï¸ No backend changes â€” skipping backend checks."
fi
