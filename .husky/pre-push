#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Detect if frontend has any commits not pushed yet
CHANGED_FRONTEND=$(git diff --name-only origin/HEAD HEAD | grep "^frontend/")

if [ -n "$CHANGED_FRONTEND" ]; then
  echo "ğŸŸ¡ Frontend changes detected â€” running Next.js build..."

  cd frontend
  yarn install --silent
  yarn build || exit 1

  echo "ğŸš€ Frontend build successful â€” pushing allowed!"
else
  echo "â„¹ï¸ No frontend changes â€” skipping Next.js build."
fi
