#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

BRANCH=$(git rev-parse --abbrev-ref HEAD)

# Run only for frontend branch or frontend folder changes
if [[ "$BRANCH" == "frontend" ]] || git diff --cached --name-only | grep -q "^frontend/"; then
  echo "ğŸŸ¡ Frontend push detected â€” running Next.js build..."

  cd frontend

  npm install --silent
  npm run build || exit 1

  echo "ğŸš€ Frontend build successful â€” push allowed!"
else
  echo "â„¹ï¸ No frontend changes â€” skipping Next.js build."
fi
